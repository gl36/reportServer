(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{861:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=u(n(0)),i=n(321);n(323);n(324);var o=u(n(879)),l=u(n(322));function u(e){return e&&e.__esModule?e:{default:e}}new o.default;var s=i.List.Item,c=i.Checkbox.CheckboxItem,d=(i.Checkbox.AgreeItem,s.Brief,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onChangeColor=function(e){n.setState({colorValue:e})},n.handleOk=function(e){var t=n.state.selectedRowKeys.join(","),a=n.state.paramName;n.state.inParam[a]=t,n.setState({visible:!1,pageNumd:1})},n.handleCancel=function(e){n.okdata=[],n.setState({visible:!1,selectedRowKeys:[]})},n.onSelectChangeDic=function(e){n.okdata=e,n.setState({selectedRowKeys:e})},n.onDictChange=function(e,t){for(var a=n.state.selectedRowKeys,r=[],i=0,o=0;o<a.length;o++)t!=a[o]?r.push(a[o]):i+=1;0==i&&r.push(t),n.setState({selectedRowKeys:r})},n.state={qry_id:n.props.match.params.qry_id,class_id:n.props.match.params.class_id,data:[],inParam:{},displayInParam:{},imgHeight:176,driver:"aaaa",paramClass:null,dictData:{},dateInParam:{},visible:!1,colorValue:[],paramValue:"",pageNumd:1,perPaged:5,searchDictionary:"",totald:0,paramName:"",selectedRowKeys:[],dictionaryList:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"onReset",value:function(){this.props.form.resetFields()}},{key:"componentDidMount",value:function(){this.getQueryParam()}},{key:"getQueryParam",value:function(){var e=this;l.default.post("/reportServer/query/getQueryParam/"+this.state.qry_id,null).then(function(t){if("1000"==t.resultCode){for(var n=t.data.in,a=0;a<n.length;a++){var r=n[a].in_id;"Select"==n[a].render?(e.getDiclist(n[a].in_id,n[a].dict_id,"Select"),e.state.inParam[r]=""):"TagSelect"==n[a].render?(e.getDiclist(n[a].in_id,n[a].dict_id,"TagSelect"),e.state.inParam[r]=""):"Checkbox"==n[a].render?(e.getDiclist(n[a].in_id,n[a].dict_id,"Checkbox"),e.state.inParam[r]="0"):"Datepicker"==n[a].render?(e.state.inParam[r]="",e.state.dateInParam[r]=null):e.state.inParam[r]=""}e.setState({data:t.data.in}),e.state.data.map(function(t){return e.state.displayInParam[t.in_id]=[]})}else i.Toast.fail(t.message)}).catch(function(e){i.Toast.fail(e)})}},{key:"getDiclist",value:function(e,t,n){var a=this,r={pageNumd:1,perPaged:15,searchDictionary:""};l.default.post("reportServer/dict/getDictValueByID/"+t,JSON.stringify(r)).then(function(r){var i=[],o=r.data;if(null!=o){for(var l=0;l<o.length;l++){var u={label:o[l].value_name,value:o[l].value_code};i.push(u)}var s=a.state.dictData;"TagSelect"==n?s[t]=i:s[e+t]=i,a.setState({dictData:s})}})}},{key:"execQuery",value:function(){var e="",t=!0,n=!1,a=void 0;try{for(var r,i=Object.keys(this.state.inParam)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;e=e+"&"+o+"="+this.state.inParam[o]}}catch(e){n=!0,a=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw a}}e=e.substring(1,e.length),this.setState({paramClass:this.state.qry_id}),window.location.href="#/QueryResult/"+this.state.class_id+"/"+this.state.qry_id+"/"+e}},{key:"onValueChange",value:function(e,t){var n=this.state.inParam;n[e]=t,this.setState({inParam:n})}},{key:"onSelectChange",value:function(e,t){this.state.displayInParam[e]=t,t.length>0&&(t=t[0]),this.state.inParam[e]=t}},{key:"onCheckChange",value:function(e,t){t=t.target.checked?"1":"0";var n=this.state.inParam;n[e]=t,this.setState({inParam:n})}},{key:"onDateChange",value:function(e,t){if(null!=t&&""!=t){var n=new Date(t),a=n.getMonth()+1;a<10&&(a="0"+a);var r=n.getFullYear()+"-"+a+"-"+n.getDate(),i=this.state,o=i.inParam,l=i.dateInParam;o[e]=r,l[e]=t,this.setState({inParam:o,dateInParam:l})}}},{key:"openModelClick",value:function(e,t,n){e.preventDefault(),this.okdata=[],this.setState({visible:!0,dictionaryList:[],paramValue:n,paramName:t,totald:0,selectedRowKeys:[]},function(){this.loadModelData(n)})}},{key:"loadModelData",value:function(e){var t=this,n={};n.pageNumd=this.state.pageNumd,n.perPaged=this.state.perPaged,n.searchDictionary=this.state.searchDictionary,this.setState({loading:!0}),l.default.post("reportServer/dict/getDictValueByID/"+e,JSON.stringify(n)).then(function(e){t.setState({loading:!1,dictionaryList:e.data,totald:e.totald},function(){})}).catch(function(e){t.setState({loading:!1}),i.Toast.fail(e)})}},{key:"onPageNumdChange",value:function(e){var t=this;this.setState({pageNumd:e},function(){t.loadModelData(t.state.paramValue)})}},{key:"goback",value:function(){window.location.href="#/QueryList/"+this.state.class_id}},{key:"render",value:function(){var e=this,t=this.state.data.map(function(t){return"Input"==t.render?r.default.createElement(i.InputItem,{type:"text",placeholder:"",clear:!0,onChange:function(n){return e.onValueChange(t.in_id,n)}},t.in_name,":"):"InputButton"==t.render?r.default.createElement(i.InputItem,{type:"text",placeholder:"",clear:!0,extra:r.default.createElement(i.Button,{style:{background:"url(./../src/assets/more.png) center center /  21px 21px no-repeat",border:"0PX solid #ddd"},size:"small",inline:!0,onClick:function(n){return e.openModelClick(n,t.in_id,t.dict_id)}}),onChange:function(n){return e.onValueChange(t.in_id,n)},value:e.state.inParam[t.in_id]},t.in_name,":"):"Select"==t.render?r.default.createElement(i.Picker,{data:e.state.dictData[t.in_id+t.dict_id],title:"选择"+t.in_name,value:e.state.displayInParam[t.in_id],cols:1,onOk:e.onChangeColor,onChange:function(n){return e.onSelectChange(t.in_id,n)}},r.default.createElement(i.List.Item,{arrow:"horizontal"},t.in_name)):"TagSelect"==t.render?r.default.createElement(i.Picker,{data:e.state.dictData[t.in_id+t.dict_id],title:"选择"+t.in_name,value:e.state.displayInParam[t.in_id],cols:1,onOk:e.onChangeColor,onChange:function(n){return e.onSelectChange(t.in_id,n)}},r.default.createElement(i.List.Item,{arrow:"horizontal"},t.in_name)):"Checkbox"==t.render?r.default.createElement("div",null,r.default.createElement("div",{style:{float:"left"}},r.default.createElement(i.List.Item,null,t.in_name,":")),r.default.createElement(c,{key:1,onChange:function(n){return e.onCheckChange(t.in_id,n)}})):"Datepicker"==t.render?r.default.createElement(i.DatePicker,{mode:"date",title:"Select Date",extra:"",value:e.state.dateInParam[t.in_id],onChange:function(n){return e.onDateChange(t.in_id,n)}},r.default.createElement(i.List.Item,{arrow:"horizontal"},t.in_name)):r.default.createElement(i.InputItem,{type:"text",placeholder:"",clear:!0,onChange:function(n){return e.onValueChange(t.in_id,n)}},t.in_name,":")});return r.default.createElement("div",null,r.default.createElement(i.NavBar,{mode:"light",icon:r.default.createElement(i.Icon,{type:"left"}),onLeftClick:function(){return e.goback()}},"输入查询条件"),r.default.createElement(i.List,{style:{textAlign:"center",marginBottom:"50px"}},t,r.default.createElement(s,null,r.default.createElement(i.Button,{type:"primary",onClick:function(){return e.execQuery()}},"执行查询"),r.default.createElement(i.WhiteSpace,null))),r.default.createElement(i.WhiteSpace,{size:"lg"}),r.default.createElement(i.WingBlank,null,r.default.createElement(i.Modal,{popup:!0,title:"字典查询",visible:this.state.visible,maskClosable:!1,closable:!0,afterClose:this.handleOk,onClose:this.handleOk,style:{paddingTop:"10px"}},r.default.createElement(i.List,null,this.state.dictionaryList.map(function(t){return r.default.createElement(c,{key:t.value_code,onChange:function(){return e.onDictChange(t.value_code,t.value_name)}},t.value_name)})),r.default.createElement(i.Pagination,{current:this.state.pageNumd,total:this.state.totald/this.state.perPaged,onChange:function(t){return e.onPageNumdChange(t)}}))))}}]),t}());t.default=d},879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=i(n(880));function i(e){return e&&e.__esModule?e:{default:e}}var o=new(i(n(881)).default),l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Login=function(e){var t=e.Pwd;r.default.post("reportServer/user/encodePwd",t).then(function(t){return e.Pwd=t.encodePwd,new Promise(function(e,t){console.log("start new Promise..."),e(123)})}).then(function(t){console.log("login"+t);return r.default.post("reportServer/user/login",JSON.stringify(e))}).then(function(e){console.log("success!"+e.LOGINRESULT),o.setStorage("userInfo",JSON.stringify(e)),window.location.href="#/QueryClassList"})},this.getUserList=function(){return r.default.post("reportServer/DBConnection/ListAll",{name:"Hubot",login:"hubot"})}}return a(e,[{key:"checkLoginInfo",value:function(e){var t=e.UserCode,n=e.Pwd;return"string"!=typeof t||0===t.length?{status:!1,msg:"用户名不能为空！"}:"string"!=typeof n||0===n.length?{status:!1,msg:"密码不能为空！"}:{status:!0,msg:"验证通过"}}},{key:"logout",value:function(){return _mm.request({type:"post",url:"/user/logout.do"})}}]),e}();t.default=l},880:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(325);var o=(r=a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,[{key:"get",value:function(){}}]),e}(),a.getBaseUrl=function(){return window.getServerUrl()},a.post=function(e,t){var n=o.getBaseUrl()+e,a={method:"POST",headers:{credentials:JSON.stringify({UserCode:"system",Pwd:"KfTaJa3vfLE="})},body:t};return fetch(n,a).then(function(e){return e.json()})},r);t.default=o},881:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"successTips",value:function(e){alert(e||"操作成功！")}},{key:"errorTips",value:function(e){alert(e||"好像哪里不对了~")}},{key:"setStorage",value:function(e,t){var n=void 0===t?"undefined":a(t);"object"===n?window.localStorage.setItem(e,JSON.stringify(t)):["number","string","boolean"].indexOf(n)>=0?window.localStorage.setItem(e,t):alert("该类型不能用于本地存储")}},{key:"getStorage",value:function(e){var t=window.localStorage.getItem(e);return t?JSON.parse(t):""}},{key:"removeStorage",value:function(e){window.localStorage.removeItem(e)}}]),e}();t.default=i}}]);
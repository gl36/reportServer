(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{1220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=i(n(1)),u=n(444),l=i(n(1307)),o=i(n(1308));function i(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),a(t,[{key:"render",value:function(){return r.default.createElement(u.Switch,null,r.default.createElement(u.Route,{path:"/authType/authTypeList",component:l.default}),r.default.createElement(u.Route,{path:"/authType/authTypeInfo/:name",component:o.default}),r.default.createElement(u.Redirect,{exact:!0,from:"/authType",to:"/authType/authTypeList"}))}}]),t}();t.default=f},1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1048);var r,u=n(442);var l=new((r=u)&&r.__esModule?r:{default:r}).default,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"get",value:function(){}}],[{key:"getBaseUrl",value:function(){return window.getServerUrl()}},{key:"post",value:function(t,n){if(null==l.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==l.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});var a=e.getBaseUrl()+t,r={method:"POST",headers:{credentials:JSON.stringify(l.getStorage("userInfo")||"")},body:n};return fetch(a,r).then(function(e){return e.json()}).catch(function(e){return e.json()})}}]),e}();t.default=o},1278:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),u=n(1250),l=(a=u)&&a.__esModule?a:{default:a};var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getAuthTypeList",value:function(){return l.default.post("reportServer/authType/getAllAuthTypeList",{})}},{key:"getAuthType",value:function(e){return l.default.post("reportServer/authType/getAuthTypeListByName",e)}},{key:"saveAuthType",value:function(e){if("null"==e.authtype_id){return l.default.post("reportServer/authType/saveAuthType",JSON.stringify(e))}return l.default.post("reportServer/authType/updateAuthType",JSON.stringify(e))}},{key:"deleteAuthType",value:function(e){return l.default.post("reportServer/authType/deleteAuthType",e)}},{key:"getDbList",value:function(){return l.default.post("reportServer/DBConnection/ListAll",{})}}]),e}();t.default=o},1307:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s(n(1042)),r=s(n(1047)),u=s(n(44)),l=s(n(1049)),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1041),n(1046),n(157),n(1050);var i=s(n(1)),f=n(444);function s(e){return e&&e.__esModule?e:{default:e}}var c=new(s(n(1278)).default),p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={list:[]},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.Component),o(t,[{key:"componentDidMount",value:function(){this.loadDbList()}},{key:"loadDbList",value:function(){var e=this;c.getAuthTypeList({}).then(function(t){e.setState({list:t.data})},function(t){e.setState({list:[]})})}},{key:"deleteAuthType",value:function(e){var t=this;confirm("确认删除吗？")&&c.deleteAuthType(e).then(function(e){alert("删除成功"),t.loadDbList()},function(e){alert("删除失败")})}},{key:"render",value:function(){var e=this;this.state.list.map(function(e,t){e.key=t});var t=this.state.list,n=[{title:"权限类型名称",dataIndex:"value",key:"value",render:function(e,t,n){return i.default.createElement(f.Link,{to:"/authType/authTypeView/"+t.value},e)}},{title:"权限类型描述",dataIndex:"name",key:"name"},{title:"操作",dataIndex:"操作",render:function(t,n){return i.default.createElement("span",null,i.default.createElement(f.Link,{to:"/authType/authTypeInfo/"+n.value},"编辑"),i.default.createElement(l.default,{type:"vertical"}),i.default.createElement("a",{onClick:function(){return e.deleteAuthType(""+n.value)},href:"javascript:;"},"删除"))}}];return i.default.createElement("div",{id:"page-wrapper"},i.default.createElement(a.default,{title:"权限类型管理"},i.default.createElement(u.default,{href:"#/authType/authTypeInfo/null",style:{float:"right",marginRight:"30px",marginBottom:"10px"},type:"primary"},"新建权限类型"),i.default.createElement(r.default,{dataSource:t,columns:n,pagination:!1,style:{marginTop:"30px"}})))}}]),t}();t.default=p},1308:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=m(n(1042)),r=m(n(44)),u=m(n(120)),l=m(n(66)),o=m(n(1043)),i=m(n(138)),f=m(n(1045)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(1041),n(157),n(445),n(446),n(443),n(447),n(1044);var p=m(n(1)),d=m(n(1278)),h=m(n(442)),y=m(n(1199));function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=new h.default,g=f.default.Item,_=i.default.Option,w=new d.default,E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={confirmDirty:!1,authtype_id:n.props.match.params.name,dbList:[]},n.handleSubmit=n.handleSubmit.bind(n),n.handleConfirmBlur=n.handleConfirmBlur.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),c(t,[{key:"componentDidMount",value:function(){var e=this;w.getDbList().then(function(t){for(var n=[],a=0;a<t.length;a++)n.push(p.default.createElement(_,{key:t[a].name},t[a].name));e.setState({dbList:n})}),null!=this.state.authtype_id&&""!=this.state.authtype_id&&"null"!=this.state.authtype_id&&w.getAuthType(this.state.authtype_id).then(function(t){e.setState({authtype_id:t.data.authtype_id}),e.props.form.setFieldsValue(t.data)},function(t){e.setState({}),b.errorTips(t)})}},{key:"onSelectChange",value:function(e,t){this.props.form.setFieldsValue(v({},e,t))}},{key:"onValueChange",value:function(e){var t=e.target.name,n=e.target.value.trim();this.props.form.setFieldsValue(v({},t,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFieldsAndScroll(function(e,n){e||(n.authtype_id=t.state.authtype_id,w.saveAuthType(n).then(function(e){alert("保存成功"),window.location.href="#/authType"},function(e){t.setState({}),b.errorTips(e)}))})}},{key:"handleConfirmBlur",value:function(e){var t=e.target.value;this.setState({confirmDirty:this.state.confirmDirty||!!t})}},{key:"onValueChange",value:function(e){var t=e.target.name,n=e.target.value.trim();this.props.form.setFieldsValue(v({},t,n))}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}};return p.default.createElement("div",{id:"page-wrapper"},p.default.createElement(a.default,{title:"null"==this.state.authtype_id?"新增权限类型":"编辑权限类型"},p.default.createElement(f.default,{onSubmit:this.handleSubmit},p.default.createElement(u.default,null,p.default.createElement(l.default,{xs:24,sm:12},p.default.createElement(g,s({},n,{label:"权限类型名称"}),t("authtype_name",{rules:[{required:!0,message:"请输入权限类型名称!"}]})(p.default.createElement(o.default,{type:"text",name:"authtype_name"})))),p.default.createElement(l.default,{xs:24,sm:12},p.default.createElement(g,s({},n,{label:"权限类型描述"}),t("authtype_desc",{rules:[{required:!0,message:"请输入权限类型描述!",whitespace:!0}]})(p.default.createElement(o.default,{type:"text",name:"authtype_desc"}))))),p.default.createElement(u.default,null,p.default.createElement(l.default,{xs:24,sm:12},p.default.createElement(g,s({},n,{label:"权限类型分类"}),t("authtype_class",{rules:[{required:!0,message:"请输入权限类型分类!",whitespace:!0}]})(p.default.createElement(o.default,{type:"text",name:"authtype_class"})))),p.default.createElement(l.default,{xs:24,sm:12},p.default.createElement(g,s({},n,{label:"用户实体"}),t("use_object",{rules:[{required:!0,message:"请输入用户实体!",whitespace:!0}]})(p.default.createElement(o.default,{type:"text",name:"use_object"}))))),p.default.createElement(u.default,null,p.default.createElement(l.default,{xs:24,sm:12},p.default.createElement(g,s({},n,{label:"数据库"}),t("auth_db",{rules:[{required:!0,message:"请输入数据库!",whitespace:!0}]})(p.default.createElement(i.default,{style:{width:"120px"},placeholder:"请选择",name:"auth_db",onChange:function(t){return e.onSelectChange("auth_db",t)}},this.state.dbList)))),p.default.createElement(l.default,{xs:24,sm:12},p.default.createElement(g,s({},n,{label:"权限名称"}),t("auth_name",{rules:[{required:!0,message:"请输入权限名称!",whitespace:!0}]})(p.default.createElement(o.default,{type:"text",name:"auth_name"}))))),p.default.createElement(u.default,null,p.default.createElement(l.default,{xs:24,sm:12},p.default.createElement(g,s({},n,{label:"Sql"}),t("auth_sql",{rules:[{required:!0,message:"请输入Sql!",whitespace:!0}]})(p.default.createElement(y.default,{type:"text",name:"auth_sql",onChange:function(t){return e.onValueChange(t)}}))))),p.default.createElement(g,{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}},p.default.createElement(r.default,{type:"primary",htmlType:"submit",style:{marginLeft:"30px"}},"保存"),p.default.createElement(r.default,{href:"#/authType",type:"primary",style:{marginLeft:"30px"}},"返回")))))}}]),t}();t.default=f.default.create()(E)}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1250:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(1048);var a,u=n(442);var i=new((a=u)&&a.__esModule?a:{default:a}).default,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"get",value:function(){}}],[{key:"getBaseUrl",value:function(){return window.getServerUrl()}},{key:"post",value:function(t,n){if(null==i.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==i.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});var r=e.getBaseUrl()+t,a={method:"POST",headers:{credentials:JSON.stringify(i.getStorage("userInfo")||"")},body:n};return fetch(r,a).then(function(e){return e.json()}).catch(function(e){return e.json()})}}]),e}();t.default=o},1251:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(1250));function u(e){return e&&e.__esModule?e:{default:e}}new(u(n(442)).default);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getFunctionList",value:function(){return a.default.post("reportServer/function1/getAllFunctionName",null)}},{key:"getFunctionByID",value:function(e){var t="reportServer/function1/getFunctionByID/"+e;return a.default.post(t,{})}},{key:"getSqlInOut",value:function(e){var t={sqlType:"sql",sql:e};return a.default.post("reportServer/sql/getInputOutputParas",JSON.stringify(t))}},{key:"getAllFunctionClass",value:function(){return a.default.post("reportServer/function1/getAllFunctionClass","")}},{key:"saveFunctionClass",value:function(e){return a.default.post("reportServer/function1/createFunctionClassInfo",JSON.stringify(e))}},{key:"updateFunctionClass",value:function(e){return a.default.post("reportServer/function1/updateFunctionClassInfo",JSON.stringify(e))}},{key:"deleteFunctionClss",value:function(e){return a.default.post("reportServer/function1/deleteFunctionClassInfo",JSON.stringify(e))}},{key:"CreateFunction",value:function(e){return a.default.post("reportServer/function1/saveUserSql",JSON.stringify(e))}}]),e}();t.default=i},1263:function(e,t,n){var r=n(1276);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0};n(22)(r,a);r.locals&&(e.exports=r.locals)},1276:function(e,t,n){(e.exports=n(21)(!1)).push([e.i,".ant-table-thead .headerRow {\n  text-align: center; }\n\n.ant-table-tbody .headerRow {\n  text-align: center; }\n\n.checkbox {\n  text-align: center;\n  margin: auto;\n  padding: 0; }\n\n.editable-row .ant-form-explain {\n  position: absolute;\n  font-size: 12px;\n  margin-top: -4px; }\n",""])},1393:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(1042)),a=g(n(1047)),u=g(n(90)),i=g(n(1053)),o=g(n(1049)),l=g(n(1205)),s=g(n(1043)),c=g(n(1045)),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(1041),n(1046),n(289),n(1052),n(1050),n(1206),n(443),n(1044);var p=g(n(1)),v=(n(444),g(n(1251))),y=(g(n(448)),g(n(442)));function g(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function k(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}n(1263);var C=c.default.Item,S=s.default.Search,_=(new y.default,new v.default),O=p.default.createContext(),E=c.default.create()(function(e){var t=e.form,n=(e.index,k(e,["form","index"]));return p.default.createElement(O.Provider,{value:t},p.default.createElement("tr",n))}),x=function(e){function t(){var e,n,r;h(this,t);for(var a=arguments.length,u=Array(a),i=0;i<a;i++)u[i]=arguments[i];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(u))),r.getInput=function(){return p.default.createElement(s.default,null)},b(r,n)}return w(t,p.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.editing,r=t.dataIndex,a=t.title,u=(t.inputType,t.record),i=(t.index,k(t,["editing","dataIndex","title","inputType","record","index"]));return p.default.createElement(O.Consumer,null,function(t){var o=t.getFieldDecorator;return p.default.createElement("td",i,n?p.default.createElement(C,{style:{margin:0}},o(r,{rules:[{required:!0,message:"Please Input "+a+"!"}],initialValue:u[r]})(e.getInput())):i.children)})}}]),t}(),F=function(e){function t(e){h(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isEditing=function(e){return e.key===n.state.editingKey},n.cancel=function(){n.setState({editingKey:""})},n.state={list:[],pageNum:1,perPage:10,listType:"list",className:"",editingKey:""},n.columns=[{title:"ID",dataIndex:"class_id",key:"class_id",className:"headerRow"},{title:"类别名称",dataIndex:"class_name",key:"class_name",className:"headerRow",editable:!0},{title:"操作",dataIndex:"操作",className:"headerRow",render:function(e,t){var r=n.isEditing(t);return p.default.createElement("div",null,r?p.default.createElement("span",null,p.default.createElement(O.Consumer,null,function(e){return p.default.createElement("a",{href:"javascript:;",onClick:function(){return n.save(e,t.key)},style:{marginRight:8}},"保存")}),p.default.createElement(l.default,{title:"确定取消吗?",onConfirm:function(){return n.cancel(t.key)}},p.default.createElement("a",null,"取消"))):p.default.createElement("div",null,p.default.createElement("a",{onClick:function(){return n.edit(t.key)}},"编辑"),p.default.createElement(o.default,{type:"vertical"}),p.default.createElement("a",{onClick:function(){return n.deleteFunctionClss(""+t.key)},href:"javascript:;"},"删除")))}}],n}return w(t,p.default.Component),d(t,[{key:"componentDidMount",value:function(){this.loadFunctionClassList()}},{key:"loadFunctionClassList",value:function(){var e=this,t={};t.pageNum=this.state.pageNum,t.perPage=this.state.perPage,_.getAllFunctionClass(t).then(function(t){e.setState({list:t.data})},function(t){e.setState({list:[]})})}},{key:"onPageNumChange",value:function(e){var t=this;this.setState({pageNum:e},function(){t.loadFunctionClassList()})}},{key:"onValueChange",value:function(e){var t=e.target.name,n=e.target.value.trim();this.setState(m({},t,n))}},{key:"deleteFunctionClss",value:function(e){var t=this;if(confirm("确认删除吗？")){var n={class_id:e};_.deleteFunctionClss(n).then(function(e){i.default.success("删除成功"),t.loadFunctionClassList()},function(e){i.default.error("删除失败")})}}},{key:"saveClick",value:function(e){var t=this;if(""!=e&&null!=e){var n={class_name:e};_.saveFunctionClass(n).then(function(e){"1000"==e.resultCode&&(i.default.success("保存成功"),t.setState({className:""})),t.loadFunctionClassList()})}}},{key:"onValueChange",value:function(e){var t=e.target.name,n=e.target.value.trim();this.setState(m({},t,n))}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"save",value:function(e,t){var n=this;e.validateFields(function(e,r){if(!e){var a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.state.list)),u=a.findIndex(function(e){return t===e.key});if(u>-1){var o=a[u],l=r;l.class_id=t,_.updateFunctionClass(l).then(function(e){"1000"==e.resultCode?(a.splice(u,1,f({},o,r)),n.setState({list:a,editingKey:""})):(i.default.error("保存失败"),n.loadFunctionClassList())})}else a.push(r),n.setState({list:a,editingKey:""})}})}},{key:"render",value:function(){var e=this;this.state.list.map(function(e,t){e.key=e.class_id});var t={body:{row:E,cell:x}},n=this.columns.map(function(t){return t.editable?f({},t,{onCell:function(n){return{record:n,inputType:"text"===t.dataIndex,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(n)}}}):t});return p.default.createElement("div",{id:"page-wrapper"},p.default.createElement(r.default,{title:"类别管理"},p.default.createElement(u.default,null,p.default.createElement(S,{placeholder:"输入新类别名称",enterButton:"新建类别",size:"large",style:{width:300,marginBottom:"10px"},name:"className",onSearch:function(t){return e.saveClick(t)}})),p.default.createElement(a.default,{dataSource:this.state.list,columns:n,pagination:!1,components:t,rowClassName:"editable-row"})))}}]),t}();t.default=F}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[61],{1854:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(748)),a=y(n(754)),o=y(n(783)),u=y(n(770)),i=y(n(765)),l=y(n(991)),s=y(n(745)),c=y(n(752)),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(747),n(753),n(787),n(771),n(766),n(992),n(744),n(751);var p=y(n(1)),v=(n(271),y(n(775))),g=(y(n(781)),y(n(270)));function y(e){return e&&e.__esModule?e:{default:e}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function S(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}n(885);var k=c.default.Item,C=s.default.Search,O=(new g.default,new v.default),_=p.default.createContext(),E=c.default.create()(function(e){var t=e.form,n=(e.index,S(e,["form","index"]));return p.default.createElement(_.Provider,{value:t},p.default.createElement("tr",n))}),F=function(e){function t(){var e,n,r;h(this,t);for(var a=arguments.length,o=Array(a),u=0;u<a;u++)o[u]=arguments[u];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.getInput=function(){return p.default.createElement(s.default,null)},b(r,n)}return w(t,p.default.Component),d(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.editing,r=t.dataIndex,a=t.title,o=(t.inputType,t.record),u=(t.index,S(t,["editing","dataIndex","title","inputType","record","index"]));return p.default.createElement(_.Consumer,null,function(t){var i=t.getFieldDecorator;return p.default.createElement("td",u,n?p.default.createElement(k,{style:{margin:0}},i(r,{rules:[{required:!0,message:"Please Input "+a+"!"}],initialValue:o[r]})(e.getInput())):u.children)})}}]),t}(),x=function(e){function t(e){h(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.isEditing=function(e){return e.key===n.state.editingKey},n.cancel=function(){n.setState({editingKey:""})},n.state={list:[],pageNum:1,perPage:10,listType:"list",className:"",editingKey:""},n.columns=[{title:"ID",dataIndex:"class_id",key:"class_id",className:"headerRow"},{title:"类别名称",dataIndex:"class_name",key:"class_name",className:"headerRow",editable:!0},{title:"操作",dataIndex:"操作",className:"headerRow",render:function(e,t){var r=n.isEditing(t);return p.default.createElement("div",null,r?p.default.createElement("span",null,p.default.createElement(_.Consumer,null,function(e){return p.default.createElement("a",{href:"javascript:;",onClick:function(){return n.save(e,t.key)},style:{marginRight:8}},"保存")}),p.default.createElement(l.default,{title:"确定取消吗?",onConfirm:function(){return n.cancel(t.key)}},p.default.createElement("a",null,"取消"))):p.default.createElement("div",null,p.default.createElement("a",{onClick:function(){return n.edit(t.key)}},"编辑"),p.default.createElement(i.default,{type:"vertical"}),p.default.createElement("a",{onClick:function(){return n.deleteFunctionClss(""+t.key)},href:"javascript:;"},"删除")))}}],n}return w(t,p.default.Component),d(t,[{key:"componentDidMount",value:function(){this.loadFunctionClassList()}},{key:"loadFunctionClassList",value:function(){var e=this,t={};t.pageNum=this.state.pageNum,t.perPage=this.state.perPage,O.getAllFunctionClass(t).then(function(t){e.setState({list:t.data})},function(t){e.setState({list:[]})})}},{key:"onPageNumChange",value:function(e){var t=this;this.setState({pageNum:e},function(){t.loadFunctionClassList()})}},{key:"onValueChange",value:function(e){var t=e.target.name,n=e.target.value.trim();this.setState(m({},t,n))}},{key:"deleteFunctionClss",value:function(e){var t=this;if(confirm("确认删除吗？")){var n={class_id:e};O.deleteFunctionClss(n).then(function(e){u.default.success("删除成功"),t.loadFunctionClassList()},function(e){u.default.error("删除失败")})}}},{key:"saveClick",value:function(e){var t=this;if(""!=e&&null!=e){var n={class_name:e};O.saveFunctionClass(n).then(function(e){"1000"==e.resultCode&&(u.default.success("保存成功"),t.setState({className:""})),t.loadFunctionClassList()})}}},{key:"onValueChange",value:function(e){var t=e.target.name,n=e.target.value.trim();this.setState(m({},t,n))}},{key:"edit",value:function(e){this.setState({editingKey:e})}},{key:"save",value:function(e,t){var n=this;e.validateFields(function(e,r){if(!e){var a=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.state.list)),o=a.findIndex(function(e){return t===e.key});if(o>-1){var i=a[o],l=r;l.class_id=t,O.updateFunctionClass(l).then(function(e){"1000"==e.resultCode?(a.splice(o,1,f({},i,r)),n.setState({list:a,editingKey:""})):(u.default.error("保存失败"),n.loadFunctionClassList())})}else a.push(r),n.setState({list:a,editingKey:""})}})}},{key:"render",value:function(){var e=this;this.state.list.map(function(e,t){e.key=e.class_id});var t={body:{row:E,cell:F}},n=this.columns.map(function(t){return t.editable?f({},t,{onCell:function(n){return{record:n,inputType:"text"===t.dataIndex,dataIndex:t.dataIndex,title:t.title,editing:e.isEditing(n)}}}):t});return p.default.createElement("div",{id:"page-wrapper"},p.default.createElement(r.default,{title:"类别管理"},p.default.createElement(o.default,null,p.default.createElement(C,{placeholder:"输入新类别名称",enterButton:"新建类别",size:"large",style:{width:300,marginBottom:"10px"},name:"className",onSearch:function(t){return e.saveClick(t)}})),p.default.createElement(a.default,{dataSource:this.state.list,columns:n,pagination:!1,components:t,rowClassName:"editable-row"})))}}]),t}();t.default=x},742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(635);var a,o=n(270);var u=new((a=o)&&a.__esModule?a:{default:a}).default,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"getBaseUrl",value:function(){return window.getServerUrl()}},{key:"post",value:function(t,n,r){if(null==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});console.log(r);var a=r?"http://192.168.206.49:9601/":e.getBaseUrl();console.log(e.getBaseUrl()),console.log(a);var o=a+t,i={method:"POST",headers:{credentials:JSON.stringify(u.getStorage("userInfo")||"")},body:n};return fetch(o,i).then(function(e){return e.json()}).catch(function(e){return e.json()})}},{key:"getFile",value:function(t){if(null==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});var n=e.getBaseUrl()+t,r={method:"GET",headers:{credentials:JSON.stringify(u.getStorage("userInfo")||"")}};return fetch(n,r)}}]),e}();t.default=i},775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=o(n(742));function o(e){return e&&e.__esModule?e:{default:e}}new(o(n(270)).default);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getFunctionList",value:function(){return a.default.post("reportServer/function1/getAllFunctionName",null)}},{key:"getFunctionByID",value:function(e){var t="reportServer/function1/getFunctionByID/"+e;return a.default.post(t,{})}},{key:"getSqlInOut",value:function(e){var t={sqlType:"sql",sql:e};return a.default.post("reportServer/sql/getInputOutputParas",JSON.stringify(t))}},{key:"getAllFunctionClass",value:function(){return a.default.post("reportServer/function1/getAllFunctionClass","")}},{key:"saveFunctionClass",value:function(e){return a.default.post("reportServer/function1/createFunctionClassInfo",JSON.stringify(e))}},{key:"updateFunctionClass",value:function(e){return a.default.post("reportServer/function1/updateFunctionClassInfo",JSON.stringify(e))}},{key:"deleteFunctionClss",value:function(e){return a.default.post("reportServer/function1/deleteFunctionClassInfo",JSON.stringify(e))}},{key:"CreateFunction",value:function(e){return a.default.post("reportServer/function1/saveUserSql",JSON.stringify(e))}}]),e}();t.default=u},885:function(e,t,n){var r=n(993);"string"==typeof r&&(r=[[e.i,r,""]]);var a={hmr:!0,transform:void 0};n(15)(r,a);r.locals&&(e.exports=r.locals)},993:function(e,t,n){(e.exports=n(14)(!1)).push([e.i,".ant-table-thead .headerRow {\n  text-align: center; }\n\n.ant-table-tbody .headerRow {\n  text-align: center; }\n\n.checkbox {\n  text-align: center;\n  margin: auto;\n  padding: 0; }\n\n.editable-row .ant-form-explain {\n  position: absolute;\n  font-size: 12px;\n  margin-top: -4px; }\n",""])}}]);
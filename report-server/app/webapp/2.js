(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1193:function(e,t,a){var n={"./af":1055,"./af.js":1055,"./ar":1056,"./ar-dz":1057,"./ar-dz.js":1057,"./ar-kw":1058,"./ar-kw.js":1058,"./ar-ly":1059,"./ar-ly.js":1059,"./ar-ma":1060,"./ar-ma.js":1060,"./ar-sa":1061,"./ar-sa.js":1061,"./ar-tn":1062,"./ar-tn.js":1062,"./ar.js":1056,"./az":1063,"./az.js":1063,"./be":1064,"./be.js":1064,"./bg":1065,"./bg.js":1065,"./bm":1066,"./bm.js":1066,"./bn":1067,"./bn.js":1067,"./bo":1068,"./bo.js":1068,"./br":1069,"./br.js":1069,"./bs":1070,"./bs.js":1070,"./ca":1071,"./ca.js":1071,"./cs":1072,"./cs.js":1072,"./cv":1073,"./cv.js":1073,"./cy":1074,"./cy.js":1074,"./da":1075,"./da.js":1075,"./de":1076,"./de-at":1077,"./de-at.js":1077,"./de-ch":1078,"./de-ch.js":1078,"./de.js":1076,"./dv":1079,"./dv.js":1079,"./el":1080,"./el.js":1080,"./en-SG":1081,"./en-SG.js":1081,"./en-au":1082,"./en-au.js":1082,"./en-ca":1083,"./en-ca.js":1083,"./en-gb":1084,"./en-gb.js":1084,"./en-ie":1085,"./en-ie.js":1085,"./en-il":1086,"./en-il.js":1086,"./en-nz":1087,"./en-nz.js":1087,"./eo":1088,"./eo.js":1088,"./es":1089,"./es-do":1090,"./es-do.js":1090,"./es-us":1091,"./es-us.js":1091,"./es.js":1089,"./et":1092,"./et.js":1092,"./eu":1093,"./eu.js":1093,"./fa":1094,"./fa.js":1094,"./fi":1095,"./fi.js":1095,"./fo":1096,"./fo.js":1096,"./fr":1097,"./fr-ca":1098,"./fr-ca.js":1098,"./fr-ch":1099,"./fr-ch.js":1099,"./fr.js":1097,"./fy":1100,"./fy.js":1100,"./ga":1101,"./ga.js":1101,"./gd":1102,"./gd.js":1102,"./gl":1103,"./gl.js":1103,"./gom-latn":1104,"./gom-latn.js":1104,"./gu":1105,"./gu.js":1105,"./he":1106,"./he.js":1106,"./hi":1107,"./hi.js":1107,"./hr":1108,"./hr.js":1108,"./hu":1109,"./hu.js":1109,"./hy-am":1110,"./hy-am.js":1110,"./id":1111,"./id.js":1111,"./is":1112,"./is.js":1112,"./it":1113,"./it-ch":1114,"./it-ch.js":1114,"./it.js":1113,"./ja":1115,"./ja.js":1115,"./jv":1116,"./jv.js":1116,"./ka":1117,"./ka.js":1117,"./kk":1118,"./kk.js":1118,"./km":1119,"./km.js":1119,"./kn":1120,"./kn.js":1120,"./ko":1121,"./ko.js":1121,"./ku":1122,"./ku.js":1122,"./ky":1123,"./ky.js":1123,"./lb":1124,"./lb.js":1124,"./lo":1125,"./lo.js":1125,"./lt":1126,"./lt.js":1126,"./lv":1127,"./lv.js":1127,"./me":1128,"./me.js":1128,"./mi":1129,"./mi.js":1129,"./mk":1130,"./mk.js":1130,"./ml":1131,"./ml.js":1131,"./mn":1132,"./mn.js":1132,"./mr":1133,"./mr.js":1133,"./ms":1134,"./ms-my":1135,"./ms-my.js":1135,"./ms.js":1134,"./mt":1136,"./mt.js":1136,"./my":1137,"./my.js":1137,"./nb":1138,"./nb.js":1138,"./ne":1139,"./ne.js":1139,"./nl":1140,"./nl-be":1141,"./nl-be.js":1141,"./nl.js":1140,"./nn":1142,"./nn.js":1142,"./pa-in":1143,"./pa-in.js":1143,"./pl":1144,"./pl.js":1144,"./pt":1145,"./pt-br":1146,"./pt-br.js":1146,"./pt.js":1145,"./ro":1147,"./ro.js":1147,"./ru":1148,"./ru.js":1148,"./sd":1149,"./sd.js":1149,"./se":1150,"./se.js":1150,"./si":1151,"./si.js":1151,"./sk":1152,"./sk.js":1152,"./sl":1153,"./sl.js":1153,"./sq":1154,"./sq.js":1154,"./sr":1155,"./sr-cyrl":1156,"./sr-cyrl.js":1156,"./sr.js":1155,"./ss":1157,"./ss.js":1157,"./sv":1158,"./sv.js":1158,"./sw":1159,"./sw.js":1159,"./ta":1160,"./ta.js":1160,"./te":1161,"./te.js":1161,"./tet":1162,"./tet.js":1162,"./tg":1163,"./tg.js":1163,"./th":1164,"./th.js":1164,"./tl-ph":1165,"./tl-ph.js":1165,"./tlh":1166,"./tlh.js":1166,"./tr":1167,"./tr.js":1167,"./tzl":1168,"./tzl.js":1168,"./tzm":1169,"./tzm-latn":1170,"./tzm-latn.js":1170,"./tzm.js":1169,"./ug-cn":1171,"./ug-cn.js":1171,"./uk":1172,"./uk.js":1172,"./ur":1173,"./ur.js":1173,"./uz":1174,"./uz-latn":1175,"./uz-latn.js":1175,"./uz.js":1174,"./vi":1176,"./vi.js":1176,"./x-pseudo":1177,"./x-pseudo.js":1177,"./yo":1178,"./yo.js":1178,"./zh-cn":1051,"./zh-cn.js":1051,"./zh-hk":1179,"./zh-hk.js":1179,"./zh-tw":1180,"./zh-tw.js":1180};function r(e){var t=l(e);return a(t)}function l(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=l,e.exports=r,r.id=1193},1250:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1048);var r,l=a(442);var u=new((r=l)&&r.__esModule?r:{default:r}).default,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"get",value:function(){}}],[{key:"getBaseUrl",value:function(){return window.getServerUrl()}},{key:"post",value:function(t,a){if(null==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});var n=e.getBaseUrl()+t,r={method:"POST",headers:{credentials:JSON.stringify(u.getStorage("userInfo")||"")},body:a};return fetch(n,r).then(function(e){return e.json()}).catch(function(e){return e.json()})}}]),e}();t.default=i},1251:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=l(a(1250));function l(e){return e&&e.__esModule?e:{default:e}}new(l(a(442)).default);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"getFunctionList",value:function(){return r.default.post("reportServer/function1/getAllFunctionName",null)}},{key:"getFunctionByID",value:function(e){var t="reportServer/function1/getFunctionByID/"+e;return r.default.post(t,{})}},{key:"getSqlInOut",value:function(e){var t={sqlType:"sql",sql:e};return r.default.post("reportServer/sql/getInputOutputParas",JSON.stringify(t))}},{key:"getAllFunctionClass",value:function(){return r.default.post("reportServer/function1/getAllFunctionClass","")}},{key:"saveFunctionClass",value:function(e){return r.default.post("reportServer/function1/createFunctionClassInfo",JSON.stringify(e))}},{key:"updateFunctionClass",value:function(e){return r.default.post("reportServer/function1/updateFunctionClassInfo",JSON.stringify(e))}},{key:"deleteFunctionClss",value:function(e){return r.default.post("reportServer/function1/deleteFunctionClassInfo",JSON.stringify(e))}},{key:"CreateFunction",value:function(e){return r.default.post("reportServer/function1/saveUserSql",JSON.stringify(e))}}]),e}();t.default=u},1252:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),l=a(1250),u=(n=l)&&n.__esModule?n:{default:n};var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getDbList",value:function(){return u.default.post("reportServer/DBConnection/ListAll",{})}},{key:"getDb",value:function(e){return u.default.post("reportServer/DBConnection/GetByName",e)}},{key:"saveDb",value:function(e){if("null"==e._name){return u.default.post("reportServer/DBConnection/save",JSON.stringify(e))}return u.default.post("reportServer/DBConnection/update",JSON.stringify(e))}},{key:"deleteDb",value:function(e){return u.default.post("reportServer/DBConnection/Delete",e)}},{key:"testDb",value:function(e){return u.default.post("reportServer/DBConnection/test",JSON.stringify(e))}}]),e}();t.default=i},1256:function(e,t,a){var n=a(1380);"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};a(22)(n,r);n.locals&&(e.exports=n.locals)},1261:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(1047)),r=f(a(1043)),l=f(a(1045)),u=f(a(138)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1046),a(443),a(1044),a(447);var d=f(a(1)),c=f(a(1250));function f(e){return e&&e.__esModule?e:{default:e}}a(1256);var m=u.default.Option,p=l.default.Item,h=[],y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSelectChangeTab=function(e){a.setState({selectedRowKeys:e})},a.props.onRef(a),a.state={data:[],formData:{},dictData:[],authData:[],selectedRowKeys:[],rowCount:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"getTreeNode",value:function(e,t){for(var a in e){if(h.push(a),a.value==t)break;(a.key="children")&&this.getTreeNode(a,key)}}},{key:"componentDidMount",value:function(){var e=this;c.default.post("reportServer/dict/getAllDictName",null).then(function(t){"1000"==t.resultCode?e.setState({dictData:t.data}):message.error(t.message)}),c.default.post("reportServer/authType/getAllAuthTypeList",null).then(function(t){"1000"==t.resultCode?e.setState({authData:t.data}):message.error(t.message)})}},{key:"setFormValue",value:function(e){this.setState({data:e});var t=this.ArrayToFormValue(this.state.data);this.props.form.setFieldsValue(t)}},{key:"getFormValue",value:function(){var e=this;return new Promise(function(t,a){e.props.form.validateFieldsAndScroll(function(n,r){n?a(n):t(e.state.data)})})}},{key:"ArrayToFormValue",value:function(e){for(var t={},a=0;a<e.length;a++){var n=e[a],r=Object.getOwnPropertyNames(n),l=!0,u=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(l=(o=s.next()).done);l=!0){var d=o.value;t[a+"-"+d]=e[a][d]}}catch(e){u=!0,i=e}finally{try{!l&&s.return&&s.return()}finally{if(u)throw i}}}return t}},{key:"FormValueToArray",value:function(e){var t=e.getOwnPropertyNames(rowObject),a=!0,n=!1,r=void 0;try{for(var l,u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var o=l.value;e[i+"-"+o]=dataArray[i][o]}}catch(e){n=!0,r=e}finally{try{!a&&u.return&&u.return()}finally{if(n)throw r}}}},{key:"handleFieldChange",value:function(e,t,a){var n=this.state.data.map(function(e){return o({},e)});n[a][t]=e,this.setState({data:n})}},{key:"changeEvent",value:function(e){var t=e.target.id,a=t.split("-")[0],n=t.split("-")[1];this.state.data[a][n]=e.target.value}},{key:"SelectChangeEvent",value:function(e,t){var a=e,n=a.split("-")[0],r=a.split("-")[1];this.state.data[n][r]=t}},{key:"CheckBoxChangeEvent",value:function(e){var t=e.target.id,a=t.split("-")[0],n=t.split("-")[1];this.state.data[a][n]=e.target.checked?1:0}},{key:"componentDidUpdate",value:function(){}},{key:"buttonClick",value:function(){}},{key:"changeColumn",value:function(){this.refs.table.columns=this.columns1,this.arr.push(d.default.createElement(r.default,null))}},{key:"deleteRowsTwo",value:function(e){var t=this.state.data.map(function(e){return o({},e)}),a=t.findIndex(function(t){return e===t.key});t.splice(a,1),this.setState({data:t})}},{key:"deleteRows",value:function(){var e=this.state,t=e.data,a=e.selectedRowKeys;if(a.length>0&&null!=a){for(var n=t.map(function(e){return o({},e)}),r=function(e){var t=n.findIndex(function(t){return a[e]===t.key});n.splice(t,1)},l=a.length-1;l>=0;l--)r(l);this.setState({data:n,selectedRowKeys:[]},function(){var e=this.ArrayToFormValue(this.state.data);this.props.form.setFieldsValue(e)})}}},{key:"addRows",value:function(){var e=this.state,t=e.data,a=e.rowCount,n=t.map(function(e){return o({},e)}),r={key:a,qry_id:"",in_id:"",in_name:void 0,datatype:void 0,dict_id:void 0,dict_name:void 0,authtype_id:void 0,authtype_desc:void 0,validate:""};n.push(r),this.setState({data:n,rowCount:a+1},function(){var e=this.ArrayToFormValue(this.state.data);this.props.form.setFieldsValue(e)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=[{title:"列ID",dataIndex:"in_id",key:"in_id",width:"100px",className:"headerRow",align:"left",render:function(a,n,l){return d.default.createElement(p,{style:{margin:0}},t(l+"-in_id",{rules:[{required:!0,message:"列ID是必须的！"}]})(d.default.createElement(r.default,{onChange:function(t){return e.handleFieldChange(t.target.value,"in_id",l)},className:"resultColumnsDiv",style:{minWidth:"100px"}})))}},{title:"列名",dataIndex:"in_name",key:"in_name",className:"headerRow",width:"100px",render:function(a,n,l){return d.default.createElement(p,{style:{margin:0}},t(l+"-in_name",{rules:[{required:!0,message:"列名是必须的！"}]})(d.default.createElement(r.default,{onChange:function(t){return e.handleFieldChange(t.target.value,"in_name",l)},className:"resultColumnsDiv",style:{minWidth:"100px"}})))}},{title:"数据类型",dataIndex:"datatype",key:"datatype",className:"headerRow",render:function(a,n,r){return d.default.createElement(l.default.Item,{style:{margin:0}},t(r+"-datatype",{rules:[{required:!0,message:"数据类型是必须的！"}]})(d.default.createElement(u.default,{allowClear:!0,className:"resultColumnsDiv",style:{minWidth:"100px"},onChange:function(t){return e.handleFieldChange(t,"datatype",r)}},d.default.createElement(m,{value:"varchar"},"字符串"),d.default.createElement(m,{value:"number"},"数字"),d.default.createElement(m,{value:"date"},"日期"))))}},{title:"数据字典",dataIndex:"dict_id",key:"dict_id",className:"headerRow",render:function(t,a,n){return d.default.createElement(l.default.Item,{style:{margin:0}},e.props.form.getFieldDecorator(n+"-dict_id",{})(d.default.createElement(u.default,{allowClear:!0,className:"resultColumnsDiv",style:{minWidth:"100px"},onChange:function(t){return e.handleFieldChange(t,"dict_id",n)}},e.state.dictData.map(function(e){return d.default.createElement(m,{value:e.dict_id},e.dict_name)}))))}},{title:"输入组件",dataIndex:"render",key:"render",className:"headerRow",render:function(t,a,n){return d.default.createElement(l.default.Item,{style:{margin:0}},e.props.form.getFieldDecorator(n+"-render",{})(d.default.createElement(u.default,{allowClear:!0,className:"resultColumnsDiv",style:{minWidth:"100px"},onChange:function(t){return e.handleFieldChange(t,"render",n)}},d.default.createElement(m,{value:"Input"},"输入框"),d.default.createElement(m,{value:"Datepicker"},"日期选择"),d.default.createElement(m,{value:"Checkbox"},"复选框"),d.default.createElement(m,{value:"InputButton"},"弹出选择"),d.default.createElement(m,{value:"Select"},"下拉选择"),d.default.createElement(m,{value:"TagSelect"},"标签选择"))))}},{title:"验证规则",dataIndex:"validate",key:"validate",className:"headerRow",render:function(t,a,n){return d.default.createElement(l.default.Item,{style:{margin:0}},e.props.form.getFieldDecorator(n+"-validate",{})(d.default.createElement(u.default,{allowClear:!0,className:"resultColumnsDiv",style:{minWidth:"100px"},onChange:function(t){return e.handleFieldChange(t,"validate",n)}},d.default.createElement(m,{value:"required"},"必须输入"),d.default.createElement(m,{value:"number"},"数字"),d.default.createElement(m,{value:"date"},"日期"),d.default.createElement(m,{value:"model"},"模式匹配"))))}},{title:"数据权限",key:"authtype_id",width:"16%",dataIndex:"authtype_id",render:function(t,a,n){return d.default.createElement(l.default.Item,{style:{margin:0}},e.props.form.getFieldDecorator(n+"-authtype_id",{})(d.default.createElement(u.default,{className:"resultColumnsDiv",style:{minWidth:"100px"},onChange:function(t){return e.handleFieldChange(t,"authtype_id",n)}},e.state.authData.map(function(e){return d.default.createElement(m,{key:e.value,value:e.value},e.name)}))))}}],i={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChangeTab};return d.default.createElement(l.default,null,d.default.createElement(n.default,{ref:"table",columns:a,dataSource:this.state.data,size:"small",bordered:!0,rowSelection:1==this.props.editable?i:null,pagination:!1,scroll:{x:!0}}))}}]),t}();t.default=y=l.default.create()(y)},1262:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(1183)),r=p(a(1047)),l=p(a(1049)),u=p(a(1045)),i=p(a(1043)),o=p(a(138)),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},d=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(1182),a(1046),a(1050),a(1044),a(443),a(447);var c=a(1),f=p(c);a(444),p(a(1250));a(1256);var m=p(a(1381));function p(e){return e&&e.__esModule?e:{default:e}}var h=o.default.Option,y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onSelectChangeTab=function(e){a.setState({selectedRowKeys:e})},a.handleOk=function(e){a.setState({linkFormVisible:!1})},a.handleCancel=function(e){a.setState({linkFormVisible:!1})},a.state={linkFormVisible:!1},a.columns=[{title:"列ID",dataIndex:"out_id",key:"out_id",width:"150px",render:function(e,t,n){return f.default.createElement(u.default,null,f.default.createElement(u.default.Item,{style:{margin:0}},a.props.form.getFieldDecorator(n+"-out_id",{rules:[{required:!0,message:"列ID是必须的！"}]})(f.default.createElement(i.default,{onChange:function(e){return a.changeEvent(e)},className:"resultColumnsDiv",style:{minWidth:"100px"}}))))}},{title:"列名",dataIndex:"out_name",key:"out_name",className:"headerRow",render:function(e,t,n){return f.default.createElement(u.default,null,f.default.createElement(u.default.Item,{style:{margin:0}},a.props.form.getFieldDecorator(n+"-out_name",{rules:[{required:!0,message:"列名是必须的！"}]})(f.default.createElement(i.default,{onChange:function(e){return a.changeEvent(e)},className:"resultColumnsDiv",style:{minWidth:"100px"}}))))}},{title:"数据类型",dataIndex:"datatype",key:"datatype",className:"headerRow",render:function(e,t,n){return f.default.createElement(u.default,null,f.default.createElement(u.default.Item,{style:{margin:0}},a.props.form.getFieldDecorator(n+"-datatype",{rules:[{required:!0,message:"数据类型是必须的！"}]})(f.default.createElement(o.default,{className:"resultColumnsDiv",style:{minWidth:"100px"}},f.default.createElement(h,{value:"string"},"字符串"),f.default.createElement(h,{value:"number"},"数字"),f.default.createElement(h,{value:"date"},"日期")))))}},{title:"列宽",dataIndex:"width",key:"width",className:"headerRow",render:function(e,t,n){return f.default.createElement(u.default,null,f.default.createElement(u.default.Item,{style:{margin:0}},a.props.form.getFieldDecorator(n+"-width",{rules:[{required:!0,message:"参数名是必须的！"}]})(f.default.createElement(i.default,{onChange:function(e){return a.changeEvent(e)},className:"resultColumnsDiv",style:{minWidth:"100px"}}))))}},{title:"渲染组件",dataIndex:"render",key:"render",className:"headerRow",render:function(e,t,n){return f.default.createElement(u.default,null,f.default.createElement(u.default.Item,{style:{margin:0}},a.props.form.getFieldDecorator(n+"-render",{})(f.default.createElement(i.default,{onChange:function(e){return a.changeEvent(e)},className:"resultColumnsDiv",style:{minWidth:"100px"}}))))}},{title:"数据链接",dataIndex:"link",key:"link",className:"headerRowWidth",render:function(e,t,n){return null!=t.link?f.default.createElement("div",{style:{minWidth:"80px"}},f.default.createElement(c.Fragment,null,f.default.createElement("a",{disabled:"create"==a.props.action,onClick:function(){a.setState({linkFormVisible:!0,linkFormAction:null==t.link?"create":"update",linkFormQryID:t.qry_id,linkFormOutID:t.out_id})}},"修改"),f.default.createElement(l.default,{type:"vertical"}),f.default.createElement("a",null,"删除"))):f.default.createElement("div",{style:{minWidth:"80px"}},f.default.createElement(c.Fragment,null,f.default.createElement("a",{disabled:"create"==a.props.action,onClick:function(){a.setState({linkFormVisible:!0,linkFormAction:null==t.link?"create":"update",linkFormQryID:t.qry_id,linkFormOutID:t.out_id})}},"创建")))}}],a.props.onRef(a),a.state={linkFormVisible:!1,linkFormAction:"",linkFormQryID:"",linFormOutID:"",data:[],formData:{},dictData:[],authData:[],selectedRowKeys:[],rowCount:0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.default.Component),d(t,[{key:"componentDidMount",value:function(){}},{key:"setFormValue",value:function(e){this.setState({data:e});for(var t={},a=0;a<this.state.data.length;a++){var n=this.state.data[a],r=Object.getOwnPropertyNames(n),l=!0,u=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(l=(o=s.next()).done);l=!0){var d=o.value;t[a+"-"+d]=this.state.data[a][d]}}catch(e){u=!0,i=e}finally{try{!l&&s.return&&s.return()}finally{if(u)throw i}}}this.setState({formData:t}),this.props.form.setFieldsValue(this.state.formData)}},{key:"getFormValue",value:function(){var e=this;return new Promise(function(t,a){e.props.form.validateFieldsAndScroll(function(n,r){n?a(n):t(e.state.data)})})}},{key:"deleteRows",value:function(){var e=this.state,t=e.data,a=e.selectedRowKeys;if(a.length>0&&null!=a){for(var n=t.map(function(e){return s({},e)}),r=function(e){var t=n.findIndex(function(t){return a[e]===t.key});n.splice(t,1)},l=0;l<a.length;l++)r(l);this.setState({data:n,selectedRowKeys:[]},function(){var e=this.ArrayToFormValue(this.state.data);this.props.form.setFieldsValue(e)})}}},{key:"addRows",value:function(){var e=this.state,t=e.data,a=e.rowCount,n=t.map(function(e){return s({},e)}),r={key:a,qry_id:"",out_id:"",out_name:void 0,datatype:void 0,width:void 0,render:void 0,link:void 0};n.push(r),this.setState({data:n,rowCount:a+1},function(){var e=this.ArrayToFormValue(this.state.data);this.props.form.setFieldsValue(e)})}},{key:"ArrayToFormValue",value:function(e){for(var t={},a=0;a<e.length;a++){var n=e[a],r=Object.getOwnPropertyNames(n),l=!0,u=!1,i=void 0;try{for(var o,s=r[Symbol.iterator]();!(l=(o=s.next()).done);l=!0){var d=o.value;t[a+"-"+d]=e[a][d]}}catch(e){u=!0,i=e}finally{try{!l&&s.return&&s.return()}finally{if(u)throw i}}}return t}},{key:"changeEvent",value:function(e){var t=e.target.id,a=t.split("-")[0],n=t.split("-")[1];this.state.data[a][n]=e.target.value}},{key:"showModal",value:function(e){this.setState({linkFormVisible:!0,linkFormAction:"update",linkFormQryID:"70",linFormOutID:"50"})}},{key:"buttonClick",value:function(){}},{key:"changeColumn",value:function(){this.refs.table.columns=this.columns1,this.arr.push(f.default.createElement(i.default,null))}},{key:"render",value:function(){var e=this,t={selectedRowKeys:this.state.selectedRowKeys,onChange:this.onSelectChangeTab};return f.default.createElement("div",null,f.default.createElement(r.default,{ref:"table",columns:this.columns,rowSelection:1==this.props.editable?t:null,dataSource:this.state.data,size:"small",bordered:!0,scroll:{x:!0},pagination:!1}),f.default.createElement(n.default,{title:"创建数据链接",width:"800px",visible:this.state.linkFormVisible,onOk:this.handleOk,onCancel:function(t){return e.handleCancel(t)},okText:"保存",cancelText:"取消",destroyOnClose:!0},f.default.createElement(m.default,{outParam:this.state.data,action:this.state.linkFormAction,qry_id:this.state.linkFormQryID,out_id:this.state.linkFormOutID,ref:"linkForm"})))}}]),t}();t.default=y=u.default.create()(y)},1380:function(e,t,a){(e.exports=a(21)(!1)).push([e.i,".ant-table-thead .headerRow {\n  text-align: center; }\n\n.ant-table-thead .headerRowWidth > div {\n  text-align: center;\n  width: '90px';\n  min-width: '90px'; }\n\n.ant-table-tbody .headerRow {\n  text-align: center; }\n\n.checkbox {\n  text-align: center;\n  margin: auto;\n  padding: 0; }\n\n.editable-row .ant-form-explain {\n  position: absolute;\n  font-size: 12px;\n  margin-top: -4px; }\n\n.CodeMirror {\n  border: 1px solid #d9d9d9;\n  font-size: 13px;\n  width: \"100%\";\n  height: 500px; }\n\n.resultColumnsDiv {\n  word-break: keep-all;\n  white-space: nowrap; }\n",""])},1381:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(44)),r=y(a(1049)),l=y(a(1047)),u=y(a(120)),i=y(a(66)),o=y(a(1053)),s=y(a(1043)),d=y(a(1045)),c=y(a(138)),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}();a(157),a(1050),a(1046),a(445),a(446),a(1052),a(443),a(1044),a(447);var p=y(a(1)),h=y(a(1250));function y(e){return e&&e.__esModule?e:{default:e}}a(1256);var v=c.default.Option,g=d.default.Item,k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.columns=[{title:"取值类型",dataIndex:"link_in_id_value_type",className:"headerRow",render:function(e,t,n){return p.default.createElement(c.default,{style:{width:"100px"},onChange:function(e){return a.handleValueTypeChange(e,n)}},p.default.createElement(v,{key:"in",value:"in"},"输入参数"),p.default.createElement(v,{key:"out",value:"out"},"输出参数"),p.default.createElement(v,{key:"input",value:"input"},"手动输入"))}},{title:"取值",dataIndex:"link_in_id_value",key:"link_in_id_value",className:"headerRow",render:function(e,t,n){return"in"==t.link_in_id_value_type?p.default.createElement(c.default,{style:{width:"180px"},value:e,onChange:function(e){return a.handleFieldChange(e,"link_in_id_value",n)}},a.state.outParam.map(function(e){return p.default.createElement(v,{key:e.out_id,value:e.out_id},e.out_name)})):"out"==t.link_in_id_value_type?p.default.createElement(c.default,{style:{width:"180px"},value:e,onChange:function(e){return a.handleFieldChange(e,"link_in_id_value",n)}},a.state.outParam.map(function(e){return p.default.createElement(v,{key:e.out_id,value:e.out_id},e.out_name)})):"input"==t.link_in_id_value_type?p.default.createElement(s.default,{style:{width:"180px"}}):void 0}},{title:"列ID",dataIndex:"link_in_id",key:"link_in_id",width:"180px",className:"headerRow"},{title:"列名",dataIndex:"link_in_name",key:"link_in_name",width:"180px",className:"headerRow"}],a.state={data:[],action:"create",formData:{},qry_id:a.props.qry_id,out_id:a.props.out_id,link_qry_id:"",link_qry_class_id:"",queryClass:[],queryNames:[],inParam:[],outParam:e.outParam,dictData:[],authData:[],editable:!0},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,p.default.Component),m(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.form.setFieldsValue({qry_id:this.props.qry_id,out_id:this.props.out_id}),"update"==this.props.action){h.default.post("reportServer/query/getQueryOutLink/"+this.props.qry_id+"/"+this.props.out_id,null).then(function(t){"1000"==t.resultCode?e.setState({link_qry_id:t.data[0].link_qry_id,data:t.data}):o.default.error(t.message)})}else this.props.action;h.default.post("reportServer/query/getAllQueryClass","").then(function(t){console.log(JSON.stringify(t)),"1000"==t.resultCode?e.setState({queryClass:t.data}):o.default.error(t.message)})}},{key:"getQryLinkById",value:function(){o.default.error("dddd")}},{key:"onSelectChange",value:function(e){var t=this;h.default.post("reportServer/query/getQueryByClassID/"+e,"").then(function(e){"1000"==e.resultCode?(t.setState({queryNames:e.data}),console.log(t.state.queryNames)):o.default.error(e.message)})}},{key:"onQryNameSelectChange",value:function(e){var t=this;h.default.post("reportServer/query/getQueryParam/"+e,"").then(function(a){if("1000"==a.resultCode){var n=[];a.data.in.forEach(function(e){n.push({key:e.in_id,link_in_id:e.in_id,link_in_name:e.in_name,link_in_id_value_type:"in",link_in_id_value:""})}),t.setState({data:n,link_qry_id:e})}else o.default.error(a.message)})}},{key:"SaveClick",value:function(){var e={qry_id:this.props.qry_id,out_id:this.props.out_id,link_qry_id:this.state.link_qry_id,param:this.state.data};alert(e),"create"==this.state.action?h.default.post("reportServer/query/createQueryOutLink",JSON.stringify(e)).then(function(e){"1000"==e.resultCode?o.default.success("创建成功！"):o.default.error(e.message)}):"update"==this.state.action&&h.default.post("reportServer/query/updateQuery",JSON.stringify(formInfo)).then(function(e){"1000"==e.resultCode?o.default.success("更新成功！"):o.default.error(e.message)})}},{key:"handleFieldChange",value:function(e,t,a){var n=this.state.data.map(function(e){return f({},e)});n[a][t]=e,this.setState({data:n})}},{key:"handleValueTypeChange",value:function(e,t){var a=this.state.data.map(function(e){return f({},e)});a[t].link_in_id_value_type=e,this.setState({data:a})}},{key:"render",value:function(){var e=this,t={labelCol:{span:8},wrapperCol:{span:16}},a=this.props.form.getFieldDecorator;return p.default.createElement(d.default,{layout:"horizontal"},p.default.createElement(u.default,null,p.default.createElement(i.default,{span:12},p.default.createElement(g,f({label:"函数名称"},t),a("qry_id",{})(p.default.createElement(s.default,{disabled:!0}))),p.default.createElement(g,f({label:"链接输出名称"},t),a("out_id",{})(p.default.createElement(s.default,{disabled:!0})))),p.default.createElement(i.default,{span:12},p.default.createElement(g,f({label:"报表类别"},t),a("class_id",{})(p.default.createElement(c.default,{onChange:function(t){return e.onSelectChange(t)}},this.state.queryClass.map(function(e){return p.default.createElement(v,{key:e.class_id,value:e.class_id},e.class_name)})))),p.default.createElement(g,f({label:"报表名称"},t),a("qry_id",{})(p.default.createElement(c.default,{onChange:function(t){return e.onQryNameSelectChange(t)},placeholder:"请选择",name:"reportName"},this.state.queryNames.map(function(e){return p.default.createElement(v,{key:e.qry_id,value:e.qry_id},e.qry_name)})))))),p.default.createElement(u.default,null,p.default.createElement(i.default,null,p.default.createElement(l.default,{ref:"table",columns:this.columns,dataSource:this.state.data,rowKey:"link_in_id",size:"small",bordered:!0,pagination:!1}))),p.default.createElement(r.default,null),p.default.createElement(n.default,null,"清空"),p.default.createElement(n.default,{key:"submit",type:"primary",style:{marginLeft:10},onClick:function(){return e.SaveClick()}},"保存"),p.default.createElement(n.default,{key:"back",style:{marginLeft:10},onClick:this.handleCancel},"取消"))}}]),t}();t.default=k=d.default.create()(k)}}]);
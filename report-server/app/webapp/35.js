(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{1219:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(r(120)),a=p(r(1042)),l=p(r(66)),u=p(r(1047)),o=p(r(44)),i=p(r(1207)),f=p(r(1043)),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(445),r(1041),r(446),r(1046),r(157),r(1200),r(443);var c=p(r(1)),d=(r(444),p(r(1254))),y=p(r(448));function p(e){return e&&e.__esModule?e:{default:e}}var m=new(p(r(442)).default),g=new d.default,v=f.default.Search,h=i.default.TreeNode,k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={list:[],pageNum:1,perPage:10,listType:"list",searchKeyword:""},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,c.default.Component),s(t,[{key:"componentDidMount",value:function(){this.loadUserList()}},{key:"loadUserList",value:function(){var e=this,t={};t.pageNum=this.state.pageNum,t.perPage=this.state.perPage,"search"===this.state.listType&&(t.keyword=this.state.searchKeyword),g.getUserList(t).then(function(t){e.setState(t.data)},function(t){e.setState({list:[]})})}},{key:"onPageNumChange",value:function(e){var t=this;this.setState({pageNum:e},function(){t.loadUserList()})}},{key:"onValueChange",value:function(e){var t=e.target.name,r=e.target.value.trim();this.setState(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t,r))}},{key:"onSearch",value:function(e){var t=this,r=""===e?"list":"search";this.setState({listType:r,pageNum:1,searchKeyword:e},function(){t.loadUserList()})}},{key:"deleteUser",value:function(e){var t=this;confirm("确认删除吗？")&&g.delUser(e).then(function(e){alert("删除成功"),t.loadUserList()},function(e){alert("删除失败")})}},{key:"showCurRowMessage",value:function(e){alert("key:"+e.userId+" name:"+e.userName+" description:"+e.description)}},{key:"render",value:function(){var e=this;this.state.list.map(function(e,t){e.key=t});m.getStorage("userInfo");var t=this.state.list;return c.default.createElement("div",{id:"page-wrapper"},c.default.createElement(a.default,{title:"授权管理"},c.default.createElement(v,{style:{width:300,marginBottom:"10px"},placeholder:"请输入...",enterButton:"查询",onSearch:function(t){return e.onSearch(t)}}),c.default.createElement(o.default,{href:"#/user/userInfo/null",style:{float:"right",marginRight:"30px"},type:"primary"},"新建用户"),c.default.createElement(n.default,{gutter:35},c.default.createElement(l.default,{span:8},c.default.createElement(u.default,{dataSource:t,columns:[{title:"角色",dataIndex:"isAdminText",key:"isAdminText"}],pagination:!1}),c.default.createElement(y.default,{current:this.state.pageNum,total:this.state.total,onChange:function(t){return e.onPageNumChange(t)}})),c.default.createElement(l.default,{xs:24,sm:12},c.default.createElement(a.default,null,c.default.createElement(i.default,{checkable:!0,defaultExpandedKeys:["0-0-0","0-0-1"],defaultSelectedKeys:["0-0-0","0-0-1"],defaultCheckedKeys:["0-0-0","0-0-1"],onSelect:this.onSelect,onCheck:this.onCheck},c.default.createElement(h,{title:"函数权限",key:"0-0"},c.default.createElement(h,{title:"parent 1-0",key:"0-0-0"},c.default.createElement(h,{title:"leaf",key:"0-0-0-0"}),c.default.createElement(h,{title:"leaf",key:"0-0-0-1"})),c.default.createElement(h,{title:"parent 1-1",key:"0-0-1"},c.default.createElement(h,{title:c.default.createElement("span",{style:{color:"#1890ff"}},"sss"),key:"0-0-1-0"}))),c.default.createElement(h,{title:"查询权限",key:"0-0"},c.default.createElement(h,{title:"parent 1-0",key:"0-0-0"},c.default.createElement(h,{title:"leaf",key:"0-0-0-0"}),c.default.createElement(h,{title:"leaf",key:"0-0-0-1"})),c.default.createElement(h,{title:"parent 1-1",key:"0-0-1"},c.default.createElement(h,{title:c.default.createElement("span",{style:{color:"#1890ff"}},"sss"),key:"0-0-1-0"}))),c.default.createElement(h,{title:"Excel功能权限",key:"0-0"},c.default.createElement(h,{title:"parent 1-0",key:"0-0-0"},c.default.createElement(h,{title:"leaf",key:"0-0-0-0"}),c.default.createElement(h,{title:"leaf",key:"0-0-0-1"})),c.default.createElement(h,{title:"parent 1-1",key:"0-0-1"},c.default.createElement(h,{title:c.default.createElement("span",{style:{color:"#1890ff"}},"sss"),key:"0-0-1-0"}))),c.default.createElement(h,{title:"WEB功能权限",key:"0-0"},c.default.createElement(h,{title:"parent 1-0",key:"0-0-0"},c.default.createElement(h,{title:"leaf",key:"0-0-0-0"}),c.default.createElement(h,{title:"leaf",key:"0-0-0-1"})),c.default.createElement(h,{title:"parent 1-1",key:"0-0-1"},c.default.createElement(h,{title:c.default.createElement("span",{style:{color:"#1890ff"}},"sss"),key:"0-0-1-0"}))),c.default.createElement(h,{title:"数据权限",key:"0-0"},c.default.createElement(h,{title:"公司数据权限",key:"0-0-0"},c.default.createElement(h,{title:"leaf",key:"0-0-0-0"}),c.default.createElement(h,{title:"leaf",key:"0-0-0-1"})),c.default.createElement(h,{title:"部门数据权限",key:"0-0-1"},c.default.createElement(h,{title:c.default.createElement("span",{style:{color:"#1890ff"}},"sss"),key:"0-0-1-0"})))))))))}}]),t}();t.default=k},1250:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(1048);var a,l=r(442);var u=new((a=l)&&a.__esModule?a:{default:a}).default,o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"get",value:function(){}}],[{key:"getBaseUrl",value:function(){return window.getServerUrl()}},{key:"post",value:function(t,r){if(null==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});var n=e.getBaseUrl()+t,a={method:"POST",headers:{credentials:JSON.stringify(u.getStorage("userInfo")||"")},body:r};return fetch(n,a).then(function(e){return e.json()}).catch(function(e){return e.json()})}}]),e}();t.default=o},1254:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(1250),u=(n=l)&&n.__esModule?n:{default:n};var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,[{key:"login",value:function(e){return u.default.post("/reportServer/user/Reactlogin",JSON.stringify(e))}},{key:"checkLoginInfo",value:function(e){var t=e.UserCode,r=e.Pwd;return"string"!=typeof t||0===t.length?{status:!1,msg:"用户名不能为空！"}:"string"!=typeof r||0===r.length?{status:!1,msg:"密码不能为空！"}:{status:!0,msg:"验证通过"}}},{key:"encodePwd",value:function(e){return u.default.post("/reportServer/user/encodePwd",e)}},{key:"logout",value:function(){return u.default.post("/user/logout.do",null)}},{key:"getUserList",value:function(e){return u.default.post("/reportServer/formUser/getUserListReact",JSON.stringify(e))}},{key:"getUserListRole",value:function(e){return u.default.post("/reportServer/formUser/getUserListRole",JSON.stringify(e))}},{key:"getUserInfo",value:function(e){return u.default.post("/reportServer/formUser/getUserInfoByUserId",JSON.stringify({id:e}))}},{key:"saveUserInfo",value:function(e){return"null"==e._id?u.default.post("/reportServer/formUser/addUser",JSON.stringify(e)):u.default.post("/reportServer/formUser/updateUser",JSON.stringify(e))}},{key:"delUser",value:function(e){return u.default.post("/reportServer/formUser/deleteUser",e)}},{key:"getRoleList",value:function(){return u.default.post("/reportServer/rule/getRoleList",{})}},{key:"getRoleListByUserId",value:function(e){return u.default.post("reportServer/auth/getRoleListByUserId",JSON.stringify({userid:e}))}},{key:"UpdatePwd",value:function(e){return u.default.post("/reportServer/formUser/updatePwd",JSON.stringify(e))}}]),e}();t.default=o}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{1250:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(1048);var a,o=r(442);var u=new((a=o)&&a.__esModule?a:{default:a}).default,l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"get",value:function(){}}],[{key:"getBaseUrl",value:function(){return window.getServerUrl()}},{key:"post",value:function(t,r){if(null==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t||""==u.getStorage("userInfo")&&"/reportServer/user/encodePwd"!=t&&"/reportServer/user/Reactlogin"!=t)return window.location.href="#login",new Promise(function(e,t){});var n=e.getBaseUrl()+t,a={method:"POST",headers:{credentials:JSON.stringify(u.getStorage("userInfo")||"")},body:r};return fetch(n,a).then(function(e){return e.json()}).catch(function(e){return e.json()})}}]),e}();t.default=l},1251:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=o(r(1250));function o(e){return e&&e.__esModule?e:{default:e}}new(o(r(442)).default);var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"getFunctionList",value:function(){return a.default.post("reportServer/function1/getAllFunctionName",null)}},{key:"getFunctionByID",value:function(e){var t="reportServer/function1/getFunctionByID/"+e;return a.default.post(t,{})}},{key:"getSqlInOut",value:function(e){var t={sqlType:"sql",sql:e};return a.default.post("reportServer/sql/getInputOutputParas",JSON.stringify(t))}},{key:"getAllFunctionClass",value:function(){return a.default.post("reportServer/function1/getAllFunctionClass","")}},{key:"saveFunctionClass",value:function(e){return a.default.post("reportServer/function1/createFunctionClassInfo",JSON.stringify(e))}},{key:"updateFunctionClass",value:function(e){return a.default.post("reportServer/function1/updateFunctionClassInfo",JSON.stringify(e))}},{key:"deleteFunctionClss",value:function(e){return a.default.post("reportServer/function1/deleteFunctionClassInfo",JSON.stringify(e))}},{key:"CreateFunction",value:function(e){return a.default.post("reportServer/function1/saveUserSql",JSON.stringify(e))}}]),e}();t.default=u},1378:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=h(r(1042)),a=h(r(1049)),o=h(r(161)),u=h(r(44)),l=h(r(11)),i=h(r(214)),c=h(r(1053)),f=h(r(1043)),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();r(1041),r(1050),r(454),r(157),r(1054),r(1196),r(1052),r(443);var d=h(r(1)),y=h(r(1194)),p=h(r(1251)),v=h(r(1250));function h(e){return e&&e.__esModule?e:{default:e}}new p.default;var m=y.default.Column,g=(y.default.ColumnGroup,f.default.Search),w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={loading:!1,list:[],selectedRows:[],selectedRowKeys:[]},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.default.Component),s(t,[{key:"componentDidMount",value:function(){this.getAllQueryName()}},{key:"getAllQueryName",value:function(){var e=this;v.default.post("reportServer/query/getAllQueryName",null).then(function(t){"1000"==t.resultCode?e.setState({list:t.data}):c.default.error(t.message)})}},{key:"onNewQry",value:function(e){"sql"==e.key?window.location.href="#/query/SqlCreator/create/0":"procedure"==e.key?window.location.href="#/query/ProcedureCreator/create/0":"http"==e.key?window.location.href="#/query/HttpCreator/create/0":"table"==e.key&&(window.location.href="#/query/TableCreator/create/0")}},{key:"onDelButtonClick",value:function(){var e=this;confirm("确认删除吗？")&&v.default.post("reportServer/query/deleteQuery",JSON.stringify(this.state.selectedRows)).then(function(t){"1000"==t.resultCode?(c.default.success("删除成功！"),e.getAllQueryName(),e.setState({selectedRowKeys:[],selectedRows:[]})):c.default.error(t.message)})}},{key:"onPageNumChange",value:function(e){var t=this;this.setState({pageNum:e},function(){t.loadUserList()})}},{key:"onSearch",value:function(e){var t=this,r=""===e?"list":"search";this.setState({listType:r,pageNum:1,searchKeyword:e},function(){t.loadUserList()})}},{key:"showCurRowMessage",value:function(e){alert("key:"+e.userId+" name:"+e.userName+" description:"+e.description)}},{key:"render",value:function(){var e=this,t=(this.state.list,{selectedRowKeys:this.state.selectedRowKeys,onChange:function(t,r){console.log("selectedRowKeys changed: ",t),e.setState({selectedRowKeys:t,selectedRows:r})}});return d.default.createElement("div",null,d.default.createElement(n.default,{title:"数据资产",bodyStyle:{padding:"10px"}},d.default.createElement(o.default,{style:{marginRight:"20px"},type:"primary",overlay:d.default.createElement(i.default,{onClick:function(t){return e.onNewQry(t)}},d.default.createElement(i.default.Item,{key:"sql"},"sql语句"),d.default.createElement(i.default.Item,{key:"procedure"},"存储过程"),d.default.createElement(i.default.Item,{key:"http"},"http请求"),d.default.createElement(i.default.Item,{key:"table"},"数据库表"))},d.default.createElement(u.default,null,"新建查询",d.default.createElement(l.default,{type:"down"}))),d.default.createElement(u.default,{href:"#/query/QueryClass",style:{marginRight:"15px",marginLeft:"15px"}},"查询类别管理"),d.default.createElement(u.default,{onClick:function(){return e.onDelButtonClick()},style:{marginRight:"10px"}},"删除"),d.default.createElement(g,{style:{maxWidth:300,marginBottom:"10px",float:"right"},placeholder:"请输入...",enterButton:"查询",onSearch:function(t){return e.onSearch(t)}}),d.default.createElement(y.default,{dataSource:this.state.list,rowKey:"qry_id",rowSelection:t,ref:"qryTable"},d.default.createElement(m,{title:"查询ID",dataIndex:"qry_id",sorter:function(e,t){return e.qry_id-t.qry_id}}),d.default.createElement(m,{title:"查询名称",dataIndex:"qry_name"}),d.default.createElement(m,{title:"查询描述",dataIndex:"qry_desc"}),d.default.createElement(m,{title:"查询类别",dataIndex:"class_name",sorter:function(e,t){return e.class_name.length-t.class_name.length}}),d.default.createElement(m,{title:"调用方式",dataIndex:"qry_type"}),d.default.createElement(m,{title:"动作",render:function(e,t){return d.default.createElement("span",null,d.default.createElement("a",{onClick:function(){"sql"==t.qry_type?window.location.href="#/query/SqlCreator/update/"+t.qry_id:"procedure"==t.qry_type?window.location.href="#/query/ProcedureCreator/update/"+t.qry_id:"http"==t.qry_type&&(window.location.href="#/query/HttpCreator/update/"+t.qry_id)}},"编辑"),d.default.createElement(a.default,{type:"vertical"}),d.default.createElement("a",{href:"#/query/CreateTemplate"},"模板"))}}))))}}]),t}();t.default=w}}]);